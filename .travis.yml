sudo: required

language: generic

before_install:
  - "sudo apt-get update"
  - "sudo apt-get install -y gnupg curl libgetopt-long-descriptive-perl wget python-pygments fontconfig"

before_script:
  # Download Textlive 2018 Installer
  - curl -sL http://mirror.utexas.edu/ctan/systems/texlive/tlnet/install-tl-unx.tar.gz | tar zxf -
  - mv install-tl-2018* install-tl
  - cd install-tl
  - echo "selected_scheme scheme-small" > profile
  - sudo ./install-tl -profile profile
  - cd ..
  - rm -rf install-tl
  # Update PATH
  - export PATH="/usr/local/texlive/2018/bin/x86_64-linux:$PATH"
  # Check texlive version
  - tlmgr version -v
  # Initialize some data structure required for tlmgr
  - tlmgr init-usertree
  - tlmgr install enumitem
  - tlmgr install geometry
  - tlmgr install hyperref
  - tlmgr install listings
  - tlmgr install mathtools
  - tlmgr install physics
  # Check which tex packages we have available
  - tlmgr info --only-installed ||
        echo "Couldn't retrieve the texlive package list\!"
script:
  - pdflatex -halt-on-error -interaction nonstopmode document.tex &&
    bibtex document.tex &&
    pdflatex -halt-on-error -interaction nonstopmode document.tex &&
    pdflatex -halt-on-error -interaction nonstopmode document.tex
